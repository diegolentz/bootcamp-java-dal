{"ast":null,"code":"import _slicedToArray from\"C:/desarrollo/git/bootcamp-java-dal/app-web/src/main/webapp/webapp-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{MovieCard}from'./MovieCard';import styles from'./MovieGrid.module.css';import{useState,useEffect}from'react';import{get}from'./../utils/httpClient';import{Spinner}from'./Spinner';// import { useQuery } from '../hooks/useQuery';\nimport InfiniteScroll from'react-infinite-scroll-component';import{jsx as _jsx}from\"react/jsx-runtime\";export function MovieGird(_ref){var search=_ref.search;//estado > steState\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),peliculas=_useState2[0],setPeliculas=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),hasMore=_useState8[0],setHasMore=_useState8[1];//cuando se carga el componente se ejecuta \"el que tiene []\"\nuseEffect(function(){setIsLoading(true);var urlSerch=search?'/search/movie?query='+search:'/discover/movie?page='+page;get(urlSerch).then(function(data){if(page>1){setPeliculas(function(prevMovies){return prevMovies.concat((data===null||data===void 0?void 0:data.results)||[]);});//.sort\n}else{setPeliculas(data.results);//.sort\n}setIsLoading(false);setHasMore(data.page<data.total_pages);});},[search,page]);return/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:peliculas.length//This is important field to render the next data\n,hasMore:true,next:function next(){return setPage(function(prevPage){return prevPage+1;});},loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"ul\",{className:styles.movieGrid,children:peliculas.map(function(movie){return/*#__PURE__*/_jsx(MovieCard,{movie:movie},movie.id);})})});}","map":{"version":3,"names":["MovieCard","styles","useState","useEffect","get","Spinner","InfiniteScroll","MovieGird","search","peliculas","setPeliculas","isLoading","setIsLoading","page","setPage","hasMore","setHasMore","urlSerch","then","data","prevMovies","concat","results","total_pages","length","prevPage","movieGrid","map","movie","id"],"sources":["C:/desarrollo/git/bootcamp-java-dal/app-web/src/main/webapp/webapp-react/src/components/MovieGrid.js"],"sourcesContent":["\r\nimport { MovieCard } from './MovieCard';\r\nimport styles from './MovieGrid.module.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { get } from './../utils/httpClient';\r\nimport { Spinner } from './Spinner';\r\n// import { useQuery } from '../hooks/useQuery';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nexport function MovieGird({search}) {\r\n\r\n    //estado > steState\r\n    const [peliculas, setPeliculas] = useState([]);\r\n    const [isLoading,setIsLoading] = useState(true);\r\n    const [page,setPage] = useState(1);\r\n    const [hasMore,setHasMore] = useState(true);\r\n\r\n    //cuando se carga el componente se ejecuta \"el que tiene []\"\r\n    useEffect( ()=> {\r\n      setIsLoading(true);\r\n      const urlSerch = search \r\n        ? '/search/movie?query='+search\r\n        : '/discover/movie?page='+page;\r\n\r\n       get(urlSerch)\r\n       .then(data => {\r\n          if(page > 1) {\r\n            setPeliculas( (prevMovies) => prevMovies.concat(data?.results || []))//.sort\r\n          }else {\r\n            setPeliculas( data.results)//.sort\r\n          }\r\n\r\n          setIsLoading(false);\r\n          setHasMore(data.page < data.total_pages);\r\n      });\r\n    },[search,page]);\r\n\r\n    return (\r\n\r\n    <InfiniteScroll\r\n        dataLength={peliculas.length} //This is important field to render the next data\r\n        hasMore={true}\r\n        next={() => setPage( (prevPage) => prevPage + 1)}\r\n        loader={<Spinner/>}\r\n        >\r\n        <ul className={styles.movieGrid}>\r\n            {\r\n              peliculas.map((movie) =>{\r\n                return <MovieCard key={movie.id} movie={movie}></MovieCard>\r\n              })\r\n            }\r\n        </ul>\r\n    </InfiniteScroll>\r\n    );\r\n}"],"mappings":"8JACA,OAASA,SAAT,KAA0B,aAA1B,CACA,MAAOC,OAAP,KAAmB,wBAAnB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,GAAT,KAAoB,uBAApB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA;AACA,MAAOC,eAAP,KAA2B,iCAA3B,C,2CAEA,MAAO,SAASC,UAAT,MAA6B,IAATC,OAAS,MAATA,MAAS,CAEhC;AACA,cAAkCN,QAAQ,CAAC,EAAD,CAA1C,wCAAOO,SAAP,eAAkBC,YAAlB,eACA,eAAiCR,QAAQ,CAAC,IAAD,CAAzC,yCAAOS,SAAP,eAAiBC,YAAjB,eACA,eAAuBV,QAAQ,CAAC,CAAD,CAA/B,yCAAOW,IAAP,eAAYC,OAAZ,eACA,eAA6BZ,QAAQ,CAAC,IAAD,CAArC,yCAAOa,OAAP,eAAeC,UAAf,eAEA;AACAb,SAAS,CAAE,UAAK,CACdS,YAAY,CAAC,IAAD,CAAZ,CACA,GAAMK,SAAQ,CAAGT,MAAM,CACnB,uBAAuBA,MADJ,CAEnB,wBAAwBK,IAF5B,CAICT,GAAG,CAACa,QAAD,CAAH,CACCC,IADD,CACM,SAAAC,IAAI,CAAI,CACX,GAAGN,IAAI,CAAG,CAAV,CAAa,CACXH,YAAY,CAAE,SAACU,UAAD,QAAgBA,WAAU,CAACC,MAAX,CAAkB,CAAAF,IAAI,OAAJ,EAAAA,IAAI,SAAJ,QAAAA,IAAI,CAAEG,OAAN,GAAiB,EAAnC,CAAhB,EAAF,CAAZ,CAAqE;AACtE,CAFD,IAEM,CACJZ,YAAY,CAAES,IAAI,CAACG,OAAP,CAAZ,CAA2B;AAC5B,CAEDV,YAAY,CAAC,KAAD,CAAZ,CACAI,UAAU,CAACG,IAAI,CAACN,IAAL,CAAYM,IAAI,CAACI,WAAlB,CAAV,CACH,CAVA,EAWF,CAjBQ,CAiBP,CAACf,MAAD,CAAQK,IAAR,CAjBO,CAAT,CAmBA,mBAEA,KAAC,cAAD,EACI,UAAU,CAAEJ,SAAS,CAACe,MAAQ;AADlC,CAEI,OAAO,CAAE,IAFb,CAGI,IAAI,CAAE,sBAAMV,QAAO,CAAE,SAACW,QAAD,QAAcA,SAAQ,CAAG,CAAzB,EAAF,CAAb,EAHV,CAII,MAAM,cAAE,KAAC,OAAD,IAJZ,uBAMI,WAAI,SAAS,CAAExB,MAAM,CAACyB,SAAtB,UAEMjB,SAAS,CAACkB,GAAV,CAAc,SAACC,KAAD,CAAU,CACtB,mBAAO,KAAC,SAAD,EAA0B,KAAK,CAAEA,KAAjC,EAAgBA,KAAK,CAACC,EAAtB,CAAP,CACD,CAFD,CAFN,EANJ,EAFA,CAiBH"},"metadata":{},"sourceType":"module"}