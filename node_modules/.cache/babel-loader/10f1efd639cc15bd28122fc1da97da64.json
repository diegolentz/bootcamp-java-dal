{"ast":null,"code":"var _jsxFileName = \"C:\\\\desarrollo\\\\git\\\\bootcamp-java-dal\\\\app-web\\\\src\\\\main\\\\webapp\\\\webapp-react\\\\src\\\\components\\\\movie\\\\MovieGrid.js\",\n    _s = $RefreshSig$();\n\nimport { MovieCard } from './MovieCard';\nimport styles from './MovieGrid.module.css';\nimport { useState, useEffect } from 'react';\nimport { get } from './../utils/httpClient';\nimport { Spinner } from './Spinner'; // import { useQuery } from '../hooks/useQuery';\n\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function MovieGird(_ref) {\n  _s();\n\n  let {\n    search\n  } = _ref;\n  //estado > steState\n  const [peliculas, setPeliculas] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true); //cuando se carga el componente se ejecuta \"el que tiene []\"\n\n  useEffect(() => {\n    setIsLoading(true);\n    const urlSerch = search ? '/search/movie?query=' + search : '/discover/movie?page=' + page;\n    get(urlSerch).then(data => {\n      if (page > 1) {\n        setPeliculas(prevMovies => prevMovies.concat((data === null || data === void 0 ? void 0 : data.results) || [])); //.sort\n      } else {\n        setPeliculas(data.results); //.sort\n      }\n\n      setIsLoading(false);\n      setHasMore(data.page < data.total_pages);\n    });\n  }, [search, page]);\n  return /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n    dataLength: peliculas.length //This is important field to render the next data\n    ,\n    hasMore: true,\n    next: () => setPage(prevPage => prevPage + 1),\n    loader: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styles.movieGrid,\n      children: peliculas.map(movie => {\n        return /*#__PURE__*/_jsxDEV(MovieCard, {\n          movie: movie\n        }, movie.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 24\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MovieGird, \"6k5jVEGsRvb8Ygf/pWkYSJRYNbc=\");\n\n_c = MovieGird;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieGird\");","map":{"version":3,"names":["MovieCard","styles","useState","useEffect","get","Spinner","InfiniteScroll","MovieGird","search","peliculas","setPeliculas","isLoading","setIsLoading","page","setPage","hasMore","setHasMore","urlSerch","then","data","prevMovies","concat","results","total_pages","length","prevPage","movieGrid","map","movie","id"],"sources":["C:/desarrollo/git/bootcamp-java-dal/app-web/src/main/webapp/webapp-react/src/components/movie/MovieGrid.js"],"sourcesContent":["\r\nimport { MovieCard } from './MovieCard';\r\nimport styles from './MovieGrid.module.css';\r\nimport { useState, useEffect } from 'react';\r\nimport { get } from './../utils/httpClient';\r\nimport { Spinner } from './Spinner';\r\n// import { useQuery } from '../hooks/useQuery';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\n\r\nexport function MovieGird({search}) {\r\n\r\n    //estado > steState\r\n    const [peliculas, setPeliculas] = useState([]);\r\n    const [isLoading,setIsLoading] = useState(true);\r\n    const [page,setPage] = useState(1);\r\n    const [hasMore,setHasMore] = useState(true);\r\n\r\n    //cuando se carga el componente se ejecuta \"el que tiene []\"\r\n    useEffect( ()=> {\r\n      setIsLoading(true);\r\n      const urlSerch = search \r\n        ? '/search/movie?query='+search\r\n        : '/discover/movie?page='+page;\r\n\r\n       get(urlSerch)\r\n       .then(data => {\r\n          if(page > 1) {\r\n            setPeliculas( (prevMovies) => prevMovies.concat(data?.results || []))//.sort\r\n          }else {\r\n            setPeliculas( data.results)//.sort\r\n          }\r\n\r\n          setIsLoading(false);\r\n          setHasMore(data.page < data.total_pages);\r\n      });\r\n    },[search,page]);\r\n\r\n    return (\r\n\r\n    <InfiniteScroll\r\n        dataLength={peliculas.length} //This is important field to render the next data\r\n        hasMore={true}\r\n        next={() => setPage( (prevPage) => prevPage + 1)}\r\n        loader={<Spinner/>}\r\n        >\r\n        <ul className={styles.movieGrid}>\r\n            {\r\n              peliculas.map((movie) =>{\r\n                return <MovieCard key={movie.id} movie={movie}></MovieCard>\r\n              })\r\n            }\r\n        </ul>\r\n    </InfiniteScroll>\r\n    );\r\n}"],"mappings":";;;AACA,SAASA,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,GAAT,QAAoB,uBAApB;AACA,SAASC,OAAT,QAAwB,WAAxB,C,CACA;;AACA,OAAOC,cAAP,MAA2B,iCAA3B;;AAEA,OAAO,SAASC,SAAT,OAA6B;EAAA;;EAAA,IAAV;IAACC;EAAD,CAAU;EAEhC;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACS,SAAD,EAAWC,YAAX,IAA2BV,QAAQ,CAAC,IAAD,CAAzC;EACA,MAAM,CAACW,IAAD,EAAMC,OAAN,IAAiBZ,QAAQ,CAAC,CAAD,CAA/B;EACA,MAAM,CAACa,OAAD,EAASC,UAAT,IAAuBd,QAAQ,CAAC,IAAD,CAArC,CANgC,CAQhC;;EACAC,SAAS,CAAE,MAAK;IACdS,YAAY,CAAC,IAAD,CAAZ;IACA,MAAMK,QAAQ,GAAGT,MAAM,GACnB,yBAAuBA,MADJ,GAEnB,0BAAwBK,IAF5B;IAICT,GAAG,CAACa,QAAD,CAAH,CACCC,IADD,CACMC,IAAI,IAAI;MACX,IAAGN,IAAI,GAAG,CAAV,EAAa;QACXH,YAAY,CAAGU,UAAD,IAAgBA,UAAU,CAACC,MAAX,CAAkB,CAAAF,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEG,OAAN,KAAiB,EAAnC,CAAlB,CAAZ,CADW,CAC0D;MACtE,CAFD,MAEM;QACJZ,YAAY,CAAES,IAAI,CAACG,OAAP,CAAZ,CADI,CACuB;MAC5B;;MAEDV,YAAY,CAAC,KAAD,CAAZ;MACAI,UAAU,CAACG,IAAI,CAACN,IAAL,GAAYM,IAAI,CAACI,WAAlB,CAAV;IACH,CAVA;EAWF,CAjBQ,EAiBP,CAACf,MAAD,EAAQK,IAAR,CAjBO,CAAT;EAmBA,oBAEA,QAAC,cAAD;IACI,UAAU,EAAEJ,SAAS,CAACe,MAD1B,CACkC;IADlC;IAEI,OAAO,EAAE,IAFb;IAGI,IAAI,EAAE,MAAMV,OAAO,CAAGW,QAAD,IAAcA,QAAQ,GAAG,CAA3B,CAHvB;IAII,MAAM,eAAE,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,QAJZ;IAAA,uBAMI;MAAI,SAAS,EAAExB,MAAM,CAACyB,SAAtB;MAAA,UAEMjB,SAAS,CAACkB,GAAV,CAAeC,KAAD,IAAU;QACtB,oBAAO,QAAC,SAAD;UAA0B,KAAK,EAAEA;QAAjC,GAAgBA,KAAK,CAACC,EAAtB;UAAA;UAAA;UAAA;QAAA,QAAP;MACD,CAFD;IAFN;MAAA;MAAA;MAAA;IAAA;EANJ;IAAA;IAAA;IAAA;EAAA,QAFA;AAiBH;;GA7CetB,S;;KAAAA,S"},"metadata":{},"sourceType":"module"}